# AGENTS.md

This file is for LLM/code agents working in this repository.

## Project

- Name: `copilot-money-cli`
- Language: Rust
- Output: JSON and terminal tables
- API: Copilot Money GraphQL (`https://app.copilot.money/api/graphql`)

## Layout

- CLI entrypoint: `src/main.rs`
- CLI wiring: `src/cli/`
- GraphQL client + models: `src/client.rs`, `src/types.rs`, `src/ops.rs`
- GraphQL operation documents: `graphql/*.graphql`
- Best-effort schema stub: `schema/schema.graphql` (generated by `schema-gen`)
- Tests:
  - CLI behavior + snapshots: `tests/cli.rs`, `tests/cli_snapshots.rs`, `tests/snapshots/`
  - HTTP behavior (mock server): `tests/client_http.rs`
  - Fixtures for deterministic runs: `tests/fixtures/graphql/*.json`

## How To Work

- Prefer fixture-backed tests over live API calls.
- When adding a new command:
  - Add/extend a fixture JSON for the needed `operationName`.
  - Add/extend a snapshot in `tests/cli_snapshots.rs`.
  - Update the Command reference in `README.md`.

## Dev Commands

- Format: `cargo fmt --all`
- Test: `cargo test`
- Lint: `cargo clippy -- -D warnings`
- Coverage: `cargo llvm-cov --workspace --summary-only`

## Constraints

- Release workflow is tag-driven (`vX.Y.Z`): `.github/workflows/release.yml`.
